on my work machine:

cd /home/evyatar/work/prcc/angular/demo03
nvm version  (should yield: v20.5.0)
nvm use v20.5.0  
npm install
npm run build  (<== this is optional)
ng serve

then browse to
http://localhost:4200/


browse to this to see the Figma:
https://www.figma.com/file/Ty4mQXA9tULeEIHd53Q7cC/Digital-Forest?type=design&node-id=845-18699&mode=design&t=UNnTzTZ5aGZeuXz8-0

to deploy
---------
First, MAKE SURE everything is committed and pushed to git (otherwise you will loose your work!!!)

in console run:
./deploy.sh
(currently it deploys to github of evyatark, so all links are to that project)
- it will ask for the username and password (token) for github, which you MUST enter manually.
- if completed correctly, github will now deploy to gh-pages, you can see this task progress in https://github.com/evyatark/prcc/actions
- when action is completed, access https://evyatark.github.io/prcc/ (anyone can access from anywhere!)


ToDo
----
1. implement layers for selecting the "בחר שכבות" - Gush-Chelka, Yaad trees, Bus stations, Pishtey-Hazafa
2. implement display view of "לווין" (sattelite raster tiles)
3. HILA? - Fix formulas of view displays (temperature, vegetation, maybe also clusters)
4. HILA? - improve the region right pane (smaller gaps?)
5. add slider functionality calculate correct values in the region display
6. add pages of "external" links ("מתודולוגיה", "צור קשר", "אודות")
7. add flyTo efect when selecting a region
8. improve display of values in drop-down of filters (colored circles)
9. in layers selection, implement selecting multiple layers
10. add legend floating pane/panes
combined RGB - use formula from Shilo

Hila says
V header looks bigger, should be 90%

add gray color for out of polygons!! - how to do it
V map with labels in Hebrew
V when entering first time, zoom should be on Israel (but as a consequence, statistical areas are not displayed, until you zoom in!)
gaps between the text line in the right panel
V color of header should be gray not green
add favicon

gushChelka layer should be only in stat-areas and Sattelite display (not in Munis!!)

colors and layers of map behind our polygons


upload via Uploads API to mapbox:
https://docs.mapbox.com/help/tutorials/upload-curl/#stage-your-file-on-amazon-s3

(create an access token in the mapbox studio, with permission upload:write)

curl -X POST "https://api.mapbox.com/uploads/v1/evyatark/credentials?access_token=sk.eyJ1I..."

{
    "bucket":"tilestream-tilesets-production",
    "key":"6f/_pending/l8x3yv3ujmo2bxq06iad0zllc/evyatark",
    "accessKeyId":"ASIATNLV",
    "secretAccessKey":"zmKR",
    "sessionToken":"FwoGZXI ",
    "url":"https://tilestream-tilesets-production.s3.amazonaws.com/6f/_pending/l8x3yv3ujmo2bxq06iad0zllc/evyatark"
}

export AWS_ACCESS_KEY_ID=...
export AWS_SECRET_ACCESS_KEY=...
export AWS_SESSION_TOKEN=...

aws s3 cp /home/evyatar/work/prcc/LST8bit.tif s3://tilestream-tilesets-production/{key} --region us-east-1

upload: ./LST8bit.tif to s3://tilestream-tilesets-production/{key}

curl -X POST -H "Content-Type: application/json" -H "Cache-Control: no-cache" -d '{  "url": "http://tilestream-tilesets-production.s3.amazonaws.com/20/_pending/muv8fzfj9so24yn5i7eb1zllc/evyatark",  "tileset": "evyatark.lst-image-30",  "name": "LST 30"}' 'https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1Ijo...'

This endpoint requires a token with uploads:write scope.

{
    "id":"cllz1hk220y4f2bo48gnr6dcg",
    "name":"LST 30",
    "complete":false,
    "error":null,
    "created":"2023-08-31T10:44:50.012Z",
    "modified":"2023-08-31T10:44:50.012Z",
    "tileset":"evyatark.lst-image-30",
    "owner":"evyatark",
    "progress":0
}


curl "https://api.mapbox.com/uploads/v1/evyatark/cllz1hk220y4f2bo48gnr6dcg?access_token=sk.eyJ1I..."


{"bucket":"tilestream-tilesets-production",
"key":"64/_pending/slnkn4vd0op2rae2ujkw2zllc/evyatark",
"accessKeyId":"ASIATNL...",
"secretAccessKey":"KkVRbo6..",
"sessionToken":"FwoGZXIvYXd...",
"url":"https://tilestream-tilesets-production.s3.amazonaws.com/64/_pending/slnkn4vd0op2rae2ujkw2zllc/evyatark"}

export AWS_ACCESS_KEY_ID=ASIATNLV...
export AWS_SECRET_ACCESS_KEY=KkVRbo6...
export AWS_SESSION_TOKEN=FwoGZXIvYXdzEB...
aws s3 cp /home/evyatar/work/prcc/NDV8bit.tif s3://tilestream-tilesets-production/64/_pending/slnkn4vd0op2rae2ujkw2zllc/evyatark --region us-east-1

upload: ./NDV8bit.tif to s3://tilestream-tilesets-production/64/_pending/slnkn4vd0op2rae2ujkw2zllc/evyatark

curl -X POST -H "Content-Type: application/json" -H "Cache-Control: no-cache" -d '{  "url": "http://tilestream-tilesets-production.s3.amazonaws.com/64/_pending/slnkn4vd0op2rae2ujkw2zllc/evyatark",    "tileset": "evyatark.ndv-image-30",  "name": "NDV 30"}' 'https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1I...'

{
    "id":"cllz33r9x0r5a2as3re4bwtd1",
    "name":"NDV 30",
    "complete":false,
    "error":null,
    "created":"2023-08-31T11:30:05.410Z",
    "modified":"2023-08-31T11:30:05.410Z",
    "tileset":"evyatark.ndv-image-30",
    "owner":"evyatark",
    "progress":0}

check status with this request:
curl "https://api.mapbox.com/uploads/v1/evyatark/cllz33r9x0r5a2as3re4bwtd1?access_token=sk.eyJ1I..."

{
    "id":"cllz33r9x0r5a2as3re4bwtd1","name":"NDV 30",
    "complete":true,
    "error":null,"created":"2023-08-31T11:30:05.410Z","modified":"2023-08-31T11:30:05.410Z","tileset":"evyatark.ndv-image-30","owner":"evyatark","progress":1}

upload: ./LST_Tiles.mbtiles to s3://tilestream-tilesets-production/1c/_pending/3jlhwbddtmh2d1w0zeh2uimlc/evyatark
curl -X POST -H "Content-Type: application/json" -H "Cache-Control: no-cache" -d '{  "url": "http://tilestream-tilesets-production.s3.amazonaws.com/1c/_pending/3jlhwbddtmh2d1w0zeh2uimlc/evyatark", "tileset": "evyatark.lst-tiles",  "name": "LST Tiles 30"}' 'https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1I...'
{"id":"clmiuksur07kl2lo6rkwlf5zv","name":"LST Tiles 30","complete":false,"error":null,"created":"2023-09-14T07:26:47.587Z","modified":"2023-09-14T07:26:47.587Z","tileset":"evyatark.lst-tiles","own..
https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1I...

check status with:
evyatar@dell-precision-3551:~/work/prcc/data$ curl "https://api.mapbox.com/uploads/v1/evyatark/clmiuksur07kl2lo6rkwlf5zv?access_token=sk.eyJ1I..."
response:
{"id":"clmiuksur07kl2lo6rkwlf5zv","name":"LST Tiles 30","complete":false,"error":"Maxzoom exceeded for mbtiles file. There is a max zoom limit of 16 but tiles up to zoom level 17 were found. If you need support for 1cm tilesets please reach out to support.","created":"2023-09-14T07:26:47.587Z","modified":"2023-09-14T07:26:47.587Z","tileset":"evyatark.lst-tiles","owner":"evyatark","progress":0}
evyatar@dell-precision-3551:~/work/prcc/data$ 

public layers from Adam
-----------------------
treebase.parcels_labels
treebase.parcels
treebase.trees
treebase.canopies

mushon.cl1ozb8t603ie28kreec96kcg-8dowa


comments
1. change opacity of cluster and vegFrac (from 0.3 to 0.9?) to see better colors.
temperature is 0.9 colors are OK
2. put layer of city names and street names above the colors of polygons
3. popup on a stat area - איזור סטטיסטי 
customer should say what data to include in the pop-up 
color of text VegFrac in color green??
4. content for the about - customer should supply
5. from about, link to מדיניות שימוש like YAAD
6. bg layers - customer will supply Pishtey Hazafa
7. bg layer trees - legend explaining vadai against meshoar?
show only vadai?
display Chupot instead of trees?? ask
display smaller circles 
legend should say that trees are Meshoar 




uploading
get an access token

evyatar@dell-precision-3551:~/work/prcc/data$ 
curl -X POST "https://api.mapbox.com/uploads/v1/evyatark/credentials?access_token=sk.eyJ1IjoiZXZ5YXRhcmsiLCJhIjoiY2xsejB5eG5sMnA0dTNkcHY4M3R3a29iYyJ9.lcFx6pN17fVdcmBNPRyJPg"

response:
{
    "bucket":"tilestream-tilesets-production",
    "key":"d7/_pending/brf0w8ejati2of00s2jo43nlc/evyatark",
    "accessKeyId":"ASIATNLVGLR2A63UPFMJ",
    "secretAccessKey":"Nk/4VNj4OtypjtMlaA5h2pbOe5Wl1a0AW3wyxqKD",
    "sessionToken":"FwoGZXIvYXdzEL7//////////wEaDIZp9kiEMd7iGawnuyKVAhA4NV21fc5fpMUEpkDB+7JUMdKDbCwHCsckMFoqEDnWaG5kVIqqody5wRyOoDRoPD18HS/2eBcw2gfwipwWGu7MGCnSBARcb4yajz7ahoohbjZrBli7B0OsQlFqxblHBZMdUDtSqW1CHl3R1ESxn0IAoXh2lykKzPrLMwoMiX3N0HE4kZbWel0rLp4eBWxozHS4jAQyxgRAdzBCXswQGhZD7331ZkDcCOSQylxp2F1mq/UfR+yroiTGZzh0XwrxsjpB2L9c8mm68xjl6BzNHFbjyYle39Fj76EoMpxVuhek1Hm1JtjapPjic9OHiHC0ax9MAyzs3n9CBt0DtBS8Dc1Sn3aLEfMwJWuaYue5tjlG8iLBzhwo7dfVqAYyKU3nglbixr4QJa5+y/o2ZSZym9bPTgPnvUMQXZ878+CjGKT7Z73+8jtL",
    "url":"https://tilestream-tilesets-production.s3.amazonaws.com/d7/_pending/brf0w8ejati2of00s2jo43nlc/evyatark"}
    
evyatar@dell-precision-3551:~/work/prcc/data$ ^C

export AWS_ACCESS_KEY_ID=ASIATNLVGLR2A63UPFMJ
export AWS_SECRET_ACCESS_KEY=Nk/4VNj4OtypjtMlaA5h2pbOe5Wl1a0AW3wyxqKD
export AWS_SESSION_TOKEN=FwoGZXIvYXdzEL7//////////wEaDIZp9kiEMd7iGawnuyKVAhA4NV21fc5fpMUEpkDB+7JUMdKDbCwHCsckMFoqEDnWaG5kVIqqody5wRyOoDRoPD18HS/2eBcw2gfwipwWGu7MGCnSBARcb4yajz7ahoohbjZrBli7B0OsQlFqxblHBZMdUDtSqW1CHl3R1ESxn0IAoXh2lykKzPrLMwoMiX3N0HE4kZbWel0rLp4eBWxozHS4jAQyxgRAdzBCXswQGhZD7331ZkDcCOSQylxp2F1mq/UfR+yroiTGZzh0XwrxsjpB2L9c8mm68xjl6BzNHFbjyYle39Fj76EoMpxVuhek1Hm1JtjapPjic9OHiHC0ax9MAyzs3n9CBt0DtBS8Dc1Sn3aLEfMwJWuaYue5tjlG8iLBzhwo7dfVqAYyKU3nglbixr4QJa5+y/o2ZSZym9bPTgPnvUMQXZ878+CjGKT7Z73+8jtL

copy to aws bucket:
-------------------
aws s3 cp /home/evyatar/work/prcc/data/LST_Tiles_8_16.mbtiles s3://tilestream-tilesets-production/d7/_pending/brf0w8ejati2of00s2jo43nlc/evyatark --region us-east-1

response:
upload: ./LST_Tiles_8_16.mbtiles to s3://tilestream-tilesets-production/d7/_pending/brf0w8ejati2of00s2jo43nlc/evyatark

start processing: (Mapbox will take file from S3, process it and create a tileset)
-----------------
curl -X POST -H "Content-Type: application/json" -H "Cache-Control: no-cache" -d '{ "url": "https://tilestream-tilesets-production.s3.amazonaws.com/d7/_pending/brf0w8ejati2of00s2jo43nlc/evyatark",    "tileset": "evyatark.lst_tiles_8_16",      "name": "LST_8_16"    }' 'https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1IjoiZXZ5YXRhcmsiLCJhIjoiY2xsejB5eG5sMnA0dTNkcHY4M3R3a29iYyJ9.lcFx6pN17fVdcmBNPRyJPg'

response:
{"id":"cln350s4y1nii2imef8lbzpry","name":"LST_8_16","complete":false,"error":null,"created":"2023-09-28T12:14:32.829Z","modified":"2023-09-28T12:14:32.829Z","tileset":"evyatark.lst_tiles_8_16","owner":"evyatark","progress":0}


check status:  (to see if Mapbox completed processing)
------------
curl "https://api.mapbox.com/uploads/v1/evyatark/cln350s4y1nii2imef8lbzpry?access_token=sk.eyJ1IjoiZXZ5YXRhcmsiLCJhIjoiY2xsejB5eG5sMnA0dTNkcHY4M3R3a29iYyJ9.lcFx6pN17fVdcmBNPRyJPg"

response if processing is in progress:
{"id":"cln350s4y1nii2imef8lbzpry","name":"LST_8_16","complete":false,"error":null,"created":"2023-09-28T12:14:32.829Z","modified":"2023-09-28T12:14:32.829Z","tileset":"evyatark.lst_tiles_8_16","owner":"evyatark","progress":0}

response when processing is completed:
{"id":"cln350s4y1nii2imef8lbzpry","name":"LST_8_16","complete":true,"error":null,"created":"2023-09-28T12:14:32.829Z","modified":"2023-09-28T12:14:32.829Z","tileset":"evyatark.lst_tiles_8_16","owner":"evyatark","progress":1}



{
    "bucket":"tilestream-tilesets-production",
    "key":"3c/_pending/1zwvivz5bpn25ng1qz9j63nlc/evyatark",
    "accessKeyId":"ASIATNLVGLR2GFSY3HE7",
    "secretAccessKey":"E+n1gEQ8wQIyI2b5rHORTqzFHVinMnCHMM7E53JF",
    "sessionToken":"FwoGZXIvYXdzEL7//////////wEaDF4n8Dw7+sJt+BRgFiKVAkm8NsCjmUVwrGcvuviIkFJfApFdFBUdSkadAh1C4tW0alDnh8cbF12apAn7AIC+py7BmqQgX/gMn+wqFv8VTM+i420bLsilHfKmbEqNGDQWwuroRMX8/nwUAUmXeJ9KnyVyNTjHCYdB2rxgpol4cWHIKK3W0Q9tr1QnC8LVIY7qijkndaO741Rh+J9WJ/udBoHrBkqjzup9LDbBEz0vt0RQ3KaN/96yeURy7V5cNcNAa3thC2h7ju61853tV32WsO69DERq8/V5e334qIX84qgaoodQ34A7bP1hNJKF0Byz/jVDZ0ok5HD8x4zTLlbaqUkgfvs2SUFniS+wNBCDB0xa8x680OSWjl4teVMpY5j+iHE4S0wol/DVqAYyKeN4UkZx3VKyN7cb0zcG4ZkZh0pCA4NlsXA51Cz32DZRwj83neyzgbPd",
    "url":"https://tilestream-tilesets-production.s3.amazonaws.com/3c/_pending/1zwvivz5bpn25ng1qz9j63nlc/evyatark"
}
export AWS_ACCESS_KEY_ID=ASIATNLVGLR2GFSY3HE7
export AWS_SECRET_ACCESS_KEY=E+n1gEQ8wQIyI2b5rHORTqzFHVinMnCHMM7E53JF
export AWS_SESSION_TOKEN=FwoGZXIvYXdzEL7//////////wEaDF4n8Dw7+sJt+BRgFiKVAkm8NsCjmUVwrGcvuviIkFJfApFdFBUdSkadAh1C4tW0alDnh8cbF12apAn7AIC+py7BmqQgX/gMn+wqFv8VTM+i420bLsilHfKmbEqNGDQWwuroRMX8/nwUAUmXeJ9KnyVyNTjHCYdB2rxgpol4cWHIKK3W0Q9tr1QnC8LVIY7qijkndaO741Rh+J9WJ/udBoHrBkqjzup9LDbBEz0vt0RQ3KaN/96yeURy7V5cNcNAa3thC2h7ju61853tV32WsO69DERq8/V5e334qIX84qgaoodQ34A7bP1hNJKF0Byz/jVDZ0ok5HD8x4zTLlbaqUkgfvs2SUFniS+wNBCDB0xa8x680OSWjl4teVMpY5j+iHE4S0wol/DVqAYyKeN4UkZx3VKyN7cb0zcG4ZkZh0pCA4NlsXA51Cz32DZRwj83neyzgbPd

curl -X POST -H "Content-Type: application/json" -H "Cache-Control: no-cache" -d '{ "url": "https://tilestream-tilesets-production.s3.amazonaws.com/3c/_pending/1zwvivz5bpn25ng1qz9j63nlc/evyatark", "tileset": "evyatark.ndvi_tiles_8_16",      "name": "NDVI_8_16"    }' 'https://api.mapbox.com/uploads/v1/evyatark?access_token=sk.eyJ1IjoiZXZ5YXRhcmsiLCJhIjoiY2xsejB5eG5sMnA0dTNkcHY4M3R3a29iYyJ9.lcFx6pN17fVdcmBNPRyJPg'

curl "https://api.mapbox.com/uploads/v1/evyatark/cln36oymr0ov72bpm80fyyrkr?access_token=sk.eyJ1IjoiZXZ5YXRhcmsiLCJhIjoiY2xsejB5eG5sMnA0dTNkcHY4M3R3a29iYyJ9.lcFx6pN17fVdcmBNPRyJPg"
